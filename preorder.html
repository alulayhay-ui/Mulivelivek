<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Mulivelivek 初鹿部落｜衣服預購</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #f7f3ec;
      --bg-soft: #fffdf8;
      --card: #ffffff;
      --border: #e3ddcf;
      --accent: #c58543;
      --accent-dark: #92572a;
      --text: #2f2415;
      --muted: #7b6d5c;
      --danger: #c43c3c;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* 頂部導覽列 */
    .site-header {
      background: #ffffffee;
      backdrop-filter: blur(6px);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .header-inner {
      max-width: 1080px;
      margin: 0 auto;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-mark {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid var(--border);
      background: radial-gradient(circle at 30% 20%, #f5d7a1, #c58b4a);
    }

    .brand-text {
      display: flex;
      flex-direction: column;
      line-height: 1.1;
    }

    .brand-text-main {
      font-size: 1.05rem;
      font-weight: 600;
    }

    .brand-text-sub {
      font-size: 0.75rem;
      color: var(--muted);
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 0.85rem;
      color: var(--muted);
    }

    .header-nav a:hover {
      color: var(--accent-dark);
    }

    .header-cart-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--bg-soft);
      font-size: 0.8rem;
    }

    .header-cart-count {
      min-width: 18px;
      height: 18px;
      border-radius: 999px;
      background: var(--accent);
      color: #fff;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
    }

    /* 主內容 */
    .page {
      max-width: 1080px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }

    .breadcrumb {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .breadcrumb span {
      opacity: 0.9;
    }

    .page-title {
      margin: 0 0 4px;
      font-size: 1.5rem;
      font-weight: 600;
    }

    .page-subtitle {
      margin: 0 0 18px;
      font-size: 0.9rem;
      color: var(--muted);
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.1fr);
      gap: 24px;
      align-items: flex-start;
    }

    /* 左邊：商品展示 */
    .product-card {
      background: var(--card);
      border-radius: 14px;
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .product-image-wrap {
      background: #e5ded1;
      position: relative;
      padding-top: 75%;
    }

    .product-image-inner {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: #4c4032;
      padding: 12px;
      text-align: center;
    }

    .product-body {
      padding: 14px 16px 16px;
    }

    .product-name {
      margin: 0 0 4px;
      font-size: 1rem;
      font-weight: 600;
    }

    .product-tagline {
      margin: 0 0 10px;
      font-size: 0.82rem;
      color: var(--muted);
    }

    .product-price {
      font-size: 1rem;
      font-weight: 600;
      color: var(--accent-dark);
    }

    .product-price small {
      font-size: 0.8rem;
      color: var(--muted);
      font-weight: 400;
      margin-left: 4px;
    }

    .product-note {
      margin-top: 8px;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .product-note strong {
      color: var(--accent-dark);
    }

    /* 右邊：表單 & 購物車 */
    .panel {
      background: var(--card);
      border-radius: 14px;
      border: 1px solid var(--border);
      padding: 16px 16px 14px;
    }

    .panel + .panel {
      margin-top: 12px;
    }

    .panel-title {
      margin: 0 0 10px;
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--accent-dark);
    }

    .panel-title span {
      letter-spacing: 0;
      text-transform: none;
      font-weight: 400;
      margin-left: 4px;
      color: var(--muted);
      font-size: 0.8rem;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.9rem;
      margin-bottom: 10px;
    }

    label {
      font-weight: 500;
    }

    label .required {
      color: var(--danger);
      margin-left: 2px;
    }

    input[type="text"],
    input[type="tel"],
    input[type="number"],
    select,
    textarea {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #fffdf9;
      color: var(--text);
      font: inherit;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background-color 0.15s ease;
    }

    input::placeholder,
    textarea::placeholder {
      color: #b3a695;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(197, 133, 67, 0.25);
      background: #fff;
    }

    .helper {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .inline-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .inline-row .field {
      flex: 1 1 0;
    }

    .size-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      position: relative;
    }

    .chip input {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .chip label {
      border-radius: 999px;
      padding: 5px 11px;
      border: 1px solid var(--border);
      font-size: 0.8rem;
      cursor: pointer;
      color: var(--muted);
      background: #fffdf9;
      transition: all 0.15s ease;
    }

    .chip input:checked + label {
      color: #fff;
      background: var(--accent-dark);
      border-color: var(--accent-dark);
    }

    .btn {
      border-radius: 999px;
      border: 1px solid var(--accent);
      padding: 8px 14px;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      background: var(--accent);
      color: #fff;
      transition: background 0.12s ease, color 0.12s ease, border-color 0.12s ease, transform 0.08s ease;
    }

    .btn:hover {
      background: var(--accent-dark);
      border-color: var(--accent-dark);
      transform: translateY(-1px);
    }

    .btn-ghost {
      background: #fffdf9;
      color: var(--muted);
      border-color: var(--border);
    }

    .btn-ghost:hover {
      background: #f0e7d9;
      color: var(--accent-dark);
      border-color: var(--accent-dark);
    }

    .btn-danger {
      background: transparent;
      color: var(--danger);
      border-color: rgba(196, 60, 60, 0.5);
      font-size: 0.78rem;
      padding: 4px 9px;
    }

    .btn-danger:hover {
      background: #fbe7e7;
      border-color: var(--danger);
    }

    .error {
      color: var(--danger);
      font-size: 0.78rem;
      margin-top: 4px;
      display: none;
    }

    /* 購物車樣式 */
    .cart-empty {
      font-size: 0.8rem;
      color: var(--muted);
      padding: 4px 0;
    }

    .cart-table-wrapper {
      display: none;
      border-top: 1px solid var(--border);
      padding-top: 6px;
      margin-top: 4px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }

    th,
    td {
      padding: 6px 4px;
      text-align: left;
      vertical-align: top;
    }

    th {
      color: var(--muted);
      font-weight: 500;
      border-bottom: 1px solid var(--border);
    }

    tr + tr td {
      border-top: 1px solid #f0eae0;
    }

    .cart-summary {
      margin-top: 4px;
      text-align: right;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .cart-footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 10px;
      flex-wrap: wrap;
    }

    .cart-footer-note {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .page-footer-text {
      margin-top: 18px;
      font-size: 0.78rem;
      color: var(--muted);
      text-align: center;
    }

    @media (max-width: 860px) {
      .layout {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 600px) {
      .header-inner {
        flex-wrap: wrap;
        align-items: flex-start;
      }
      .header-nav {
        width: 100%;
        justify-content: flex-end;
      }
    }
  </style>
</head>
<body>
  <!-- 頂部 -->
  <header class="site-header">
    <div class="header-inner">
      <div class="brand">
        <div class="brand-mark"></div>
        <div class="brand-text">
          <div class="brand-text-main">Mulivelivek 初鹿部落</div>
          <div class="brand-text-sub">'inavayan · since 2025</div>
        </div>
      </div>
      <nav class="header-nav">
        <a href="#">首頁</a>
        <a href="#">所有商品</a>
        <a href="#">最新消息</a>
        <span class="header-cart-pill">
          購物車
          <span class="header-cart-count" id="headerCartCount">0</span>
        </span>
      </nav>
    </div>
  </header>

  <!-- 主頁面 -->
  <main class="page">
    <div class="breadcrumb">
      <span>首頁</span> ／ <span>衣服預購</span>
    </div>
    <h1 class="page-title">初鹿部落限定長袖預購</h1>
    <p class="page-subtitle">
      此頁為預購專用頁面，先將想要的款式與尺寸加入購物車，確認無誤後再一次填寫資料並送出訂單。
    </p>

    <div class="layout">
      <!-- 左：商品展示 -->
      <section class="product-card">
        <div class="product-image-wrap">
          <div class="product-image-inner">
            這裡可以換成商品照片（例如：初鹿部落年祭限定長袖）。<br />
            若你之後要上圖，只要把這個區塊改成 &lt;img&gt; 即可。
          </div>
        </div>
        <div class="product-body">
          <h2 class="product-name">初鹿部落年祭限定水洗長袖｜MULIVELIVEK 限定款</h2>
          <p class="product-tagline">
            以初鹿大地色為主調，搭配部落圖騰細節，紀錄今年的相聚時刻。
          </p>
          <div class="product-price">
            NT$ 450
            <small>預購價（實際價格請依公告為主）</small>
          </div>
          <p class="product-note">
            <strong>預計出貨：</strong> 2026 / 01 下旬左右，依工廠排單為主。<br />
            若有 delay 會於 IG / LINE 官方帳號公告並主動通知。
          </p>
        </div>
      </section>

      <!-- 右：表單 + 購物車 -->
      <section>
        <!-- 1. 購買人資料 -->
        <form id="orderForm" action="#" method="post">
          <div class="panel">
            <h3 class="panel-title">
              1. 購買人資料
              <span>整張訂單只需填一次</span>
            </h3>
            <div class="inline-row">
              <div class="field">
                <label for="buyerName">姓名<span class="required">*</span></label>
                <input id="buyerName" name="buyerName" type="text" placeholder="請輸入真實姓名" required>
              </div>
              <div class="field">
                <label for="buyerContact">聯絡方式<span class="required">*</span></label>
                <input id="buyerContact" name="buyerContact" type="text" placeholder="電話或 IG 帳號" required>
                <div class="helper">例：0900-000000 / @your_ig_name</div>
              </div>
            </div>
            <div class="inline-row">
              <div class="field">
                <label for="buyerRegion">地區</label>
                <input id="buyerRegion" name="buyerRegion" type="text" placeholder="例：台東初鹿 / 桃園中壢">
              </div>
              <div class="field">
                <label for="shipping">取貨方式<span class="required">*</span></label>
                <select id="shipping" name="shipping" required>
                  <option value="">請選擇取貨方式</option>
                  <option value="store">超商取貨（7-11 / 全家）</option>
                  <option value="home">宅配（需加運費）</option>
                  <option value="face">活動現場 / 部落面交</option>
                </select>
                <div class="helper">選擇超商或宅配者，之後會再與您確認地址與運費。</div>
              </div>
            </div>
          </div>
<div class="field">
  <label for="payment">付款方式<span class="required">*</span></label>
  <select id="payment" name="payment" required>
    <option value="">請選擇付款方式</option>
    <option value="transfer">匯款（ATM / 網銀轉帳）</option>
  </select>
  <div class="helper">
    完成匯款後請回報帳號末五碼，我們確認款項後會安排出貨。
  </div>
</div>
          <!-- 2. 單件商品加入購物車 -->
          <div class="panel">
            <h3 class="panel-title">
              2. 選擇商品加入購物車
              <span>可重複加入多件</span>
            </h3>
            <div class="inline-row">
              <div class="field">
                <label for="style">款式<span class="required">*</span></label>
                <select id="style">
                  <option value="">請選擇款式</option>
                  <option value="A. 年祭限定長袖（水洗黑）">A. 年祭限定長袖（水洗黑）</option>
                  <option value="B. 年祭限定長袖（霧白）">B. 年祭限定長袖（霧白）</option>
                  <option value="C. 部落日常長袖（大地棕）">C. 部落日常長袖（大地棕）</option>
                </select>
              </div>
              <div class="field">
                <label for="color">顏色</label>
                <select id="color">
                  <option value="">請選擇顏色（如適用）</option>
                  <option value="水洗黑">水洗黑</option>
                  <option value="霧白">霧白</option>
                  <option value="大地棕">大地棕</option>
                </select>
              </div>
              <div class="field">
                <label for="quantity">數量<span class="required">*</span></label>
                <input id="quantity" type="number" min="1" value="1">
              </div>
            </div>

            <div class="field">
              <label>尺寸<span class="required">*</span></label>
              <div class="size-options">
                <div class="chip">
                  <input type="radio" id="size-xs" name="size" value="XS">
                  <label for="size-xs">XS</label>
                </div>
                <div class="chip">
                  <input type="radio" id="size-s" name="size" value="S">
                  <label for="size-s">S</label>
                </div>
                <div class="chip">
                  <input type="radio" id="size-m" name="size" value="M">
                  <label for="size-m">M</label>
                </div>
                <div class="chip">
                  <input type="radio" id="size-l" name="size" value="L">
                  <label for="size-l">L</label>
                </div>
                <div class="chip">
                  <input type="radio" id="size-xl" name="size" value="XL">
                  <label for="size-xl">XL</label>
                </div>
                <div class="chip">
                  <input type="radio" id="size-2xl" name="size" value="2XL">
                  <label for="size-2xl">2XL</label>
                </div>
              </div>
              <div class="helper">若不確定尺寸，建議以平量衣服比較，或私訊詢問。</div>
            </div>

            <div class="field">
              <label for="itemNote">此件備註</label>
              <textarea id="itemNote" rows="2" placeholder="例如：送人、和朋友一起寄、特殊需求…"></textarea>
            </div>

            <button type="button" class="btn" id="addToCartBtn">
              ＋ 加入購物車
            </button>
            <div id="itemError" class="error">
              請確認款式、尺寸與數量皆已填寫。
            </div>
          </div>

          <!-- 3. 購物車 -->
          <div class="panel">
            <h3 class="panel-title">
              3. 購物車
              <span>確認所有預購品項</span>
            </h3>
            <div id="cartEmpty" class="cart-empty">
              目前尚未加入任何商品，請先在上方選擇款式與尺寸後點「加入購物車」。
            </div>
            <div class="cart-table-wrapper" id="cartTableWrapper">
              <table>
                <thead>
                  <tr>
                    <th>#</th>
                    <th>款式 / 顏色</th>
                    <th>尺寸</th>
                    <th>數量</th>
                    <th>備註</th>
                    <th>操作</th>
                  </tr>
                </thead>
                <tbody id="cartBody"></tbody>
              </table>
              <div class="cart-summary" id="cartSummary">共 0 件</div>
              <div class="cart-footer">
                <button type="button" class="btn-ghost btn" id="clearCartBtn">
                  清空購物車
                </button>
                <div class="cart-footer-note">
                  若要追加不同款式 / 尺寸，請回上方繼續加入購物車。
                </div>
              </div>
            </div>
            <input type="hidden" name="cartData" id="cartData">
          </div>

          <!-- 4. 備註與送出 -->
          <div class="panel">
            <h3 class="panel-title">
              4. 確認並送出預購單
            </h3>
            <div class="field">
              <label for="orderNote">給我們的話 / 其他備註</label>
              <textarea id="orderNote" name="orderNote" rows="3" placeholder="例如：希望同一箱寄出、發票需求、或其他想說的話。"></textarea>
            </div>
            <div id="formError" class="error">
              送出前請確認：購物車內至少有一件商品，且姓名、聯絡方式與取貨方式已填寫。
            </div>
            <div class="cart-footer">
              <button class="btn" type="submit">
                送出預購訂單
              </button>
              <div class="cart-footer-note">
                送出後建議截圖留存，日後若有疑問可協助對單。
              </div>
            </div>
          </div>
        </form>

        <p class="page-footer-text">
          此頁面僅為預購資訊彙整示意，實際付款 / 寄送方式依 Mulivelivek 官方公告為主。
        </p>
      </section>
    </div>
  </main>

  <script>
    const cart = [];
    const addBtn = document.getElementById('addToCartBtn');
    const clearBtn = document.getElementById('clearCartBtn');
    const cartBody = document.getElementById('cartBody');
    const cartEmpty = document.getElementById('cartEmpty');
    const cartTableWrapper = document.getElementById('cartTableWrapper');
    const cartSummary = document.getElementById('cartSummary');
    const cartDataInput = document.getElementById('cartData');
    const itemError = document.getElementById('itemError');
    const formError = document.getElementById('formError');
    const orderForm = document.getElementById('orderForm');
    const headerCartCount = document.getElementById('headerCartCount');

    function getSelectedSize() {
      const radios = document.querySelectorAll('input[name="size"]');
      for (const r of radios) {
        if (r.checked) return r.value;
      }
      return null;
    }

    function updateHeaderCartCount(totalQty) {
      headerCartCount.textContent = totalQty;
    }

    function renderCart() {
      if (cart.length === 0) {
        cartEmpty.style.display = 'block';
        cartTableWrapper.style.display = 'none';
        cartBody.innerHTML = '';
        cartSummary.textContent = '共 0 件';
        cartDataInput.value = '';
        updateHeaderCartCount(0);
        return;
      }

      cartEmpty.style.display = 'none';
      cartTableWrapper.style.display = 'block';
      cartBody.innerHTML = '';

      let totalQty = 0;
      cart.forEach((item, idx) => {
        totalQty += item.quantity;
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${idx + 1}</td>
          <td>${item.style}${item.color ? ' ｜ ' + item.color : ''}</td>
          <td>${item.size}</td>
          <td>${item.quantity}</td>
          <td>${item.itemNote || ''}</td>
          <td>
            <button type="button" class="btn-danger" data-index="${idx}">移除</button>
          </td>
        `;
        cartBody.appendChild(tr);
      });

      cartSummary.textContent = `共 ${totalQty} 件（${cart.length} 筆品項）`;
      cartDataInput.value = JSON.stringify(cart, null, 2);
      updateHeaderCartCount(totalQty);
    }

    addBtn.addEventListener('click', () => {
      itemError.style.display = 'none';

      const style = document.getElementById('style').value.trim();
      const color = document.getElementById('color').value.trim();
      const quantityValue = document.getElementById('quantity').value;
      const size = getSelectedSize();
      const itemNote = document.getElementById('itemNote').value.trim();
      const quantity = parseInt(quantityValue, 10);

      if (!style || !size || !quantity || quantity <= 0) {
        itemError.style.display = 'block';
        return;
      }

      cart.push({ style, color, size, quantity, itemNote });
      renderCart();

      document.getElementById('quantity').value = '1';
      document.getElementById('itemNote').value = '';
    });

    clearBtn.addEventListener('click', () => {
      if (cart.length === 0) return;
      if (!confirm('確定要清空購物車嗎？')) return;
      cart.length = 0;
      renderCart();
    });

    cartBody.addEventListener('click', e => {
      const btn = e.target;
      if (btn.matches('button[data-index]')) {
        const index = parseInt(btn.getAttribute('data-index'), 10);
        cart.splice(index, 1);
        renderCart();
      }
    });

    orderForm.addEventListener('submit', e => {
  formError.style.display = 'none';

  const buyerName = document.getElementById('buyerName').value.trim();
  const buyerContact = document.getElementById('buyerContact').value.trim();
  const shipping = document.getElementById('shipping').value.trim();
  const payment = document.getElementById('payment').value.trim(); // 新增

  if (!buyerName || !buyerContact || !shipping || !payment || cart.length === 0) {
    e.preventDefault();
    formError.style.display = 'block';
    return;
  }

  e.preventDefault(); // 示範用，正式接後端時可移除

  const buyerRegion = document.getElementById('buyerRegion').value.trim();
  const orderNote = document.getElementById('orderNote').value.trim();

  const payload = {
    buyerName,
    buyerContact,
    buyerRegion,
    shipping,
    payment,   // 新增
    orderNote,
    items: cart
  };

  console.log('預購資料：', payload);
  alert('預購資料已整理好（已顯示於 console）。正式使用時可將這份資料串接到後端或 Google 表單。');
});

    renderCart();
  </script>
</body>
</html>
